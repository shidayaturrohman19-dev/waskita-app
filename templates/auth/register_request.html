<!DOCTYPE html>
<html lang="id">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="description"
              content="Permintaan Registrasi - Waskita - Sistem Klasifikasi Konten Radikal menggunakan Machine Learning">
        <meta name="keywords"
              content="register, registrasi, waskita, klasifikasi konten, machine learning, permintaan akun">
        <meta name="csrf-token" content="{{ csrf_token() }}">
        <title>Permintaan Registrasi - Waskita</title>
        
        <!-- Preload critical resources -->
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        
        <!-- Google Fonts -->
        <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
        
        <!-- Font Awesome -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
        
        <!-- AdminLTE CSS -->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/admin-lte@3.2/dist/css/adminlte.min.css">
        
        <!-- SweetAlert2 CSS -->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11/dist/sweetalert2.min.css">
        
        <!-- Animate.css for animations -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
        
        <style>
        /* Base Styles - Konsisten dengan Login */
        .register-page {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            font-family: 'Source Sans Pro', sans-serif;
        }

        .register-box {
            width: 450px;
            margin: 2rem auto;
        }

        .card {
            border-radius: 15px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
            border: none;
        }

        .card-header {
            background: linear-gradient(135deg, #007bff 0%, #0056b3 100%);
            color: white;
            border-radius: 15px 15px 0 0;
            text-align: center;
            padding: 2rem 1rem;
        }

        .card-header h1 {
            margin: 0;
            font-size: 2rem;
            font-weight: 300;
        }

        .card-header p {
            margin: 0.5rem 0 0 0;
            opacity: 0.9;
        }

        .brand-logo {
            font-size: 3rem;
            color: white;
            margin-bottom: 1rem;
        }

        .card-body {
            padding: 2rem;
            background: white;
            border-radius: 0 0 15px 15px;
        }

        .info-box {
            background: linear-gradient(135deg, #e8f4fd 0%, #d1ecf1 100%);
            border: 1px solid rgba(52, 152, 219, 0.2);
            border-radius: 12px;
            padding: 1.25rem;
            margin-bottom: 2rem;
            display: flex;
            align-items: flex-start;
            gap: 1rem;
            position: relative;
            overflow: hidden;
        }

        .info-box::before {
            content: '';
            position: absolute;
            left: 0;
            top: 0;
            bottom: 0;
            width: 4px;
            background: #3498db;
        }

        .info-box .icon {
            color: #3498db;
            font-size: 1.2rem;
            margin-top: 0.1rem;
            flex-shrink: 0;
        }

        .info-box-content {
            flex: 1;
            font-size: 0.9rem;
            line-height: 1.5;
        }

        /* Form Styles - Sederhana seperti Login */
        .form-control {
            border-radius: 0.25rem;
            padding: 0.375rem 0.75rem;
            border: 1px solid #ced4da;
            font-size: 1rem;
        }

        .form-control:focus {
            border-color: #80bdff;
            box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);
            outline: none;
        }

        .input-group-text {
            background-color: #e9ecef;
            border: 1px solid #ced4da;
            border-right: none;
            color: #495057;
        }

        .input-group .form-control {
            border-left: none;
        }

        .input-group-append .btn {
            border-left: none;
            border: 1px solid #ced4da;
            background: #f8f9fa;
            color: #6c757d;
        }

        .input-group-append .btn:hover {
            background: #e9ecef;
            color: #495057;
        }

        .form-group {
            margin-bottom: 1.5rem;
        }

        .form-label {
            font-weight: 500;
            color: #495057;
            margin-bottom: 0.5rem;
            display: block;
            font-size: 0.9rem;
        }

        /* Button Styles - Sederhana seperti Login */
        .btn-primary {
            background-color: #007bff;
            border-color: #007bff;
            border-radius: 0.25rem;
            padding: 0.375rem 0.75rem;
            font-weight: 400;
        }

        .btn-primary:hover {
            background-color: #0069d9;
            border-color: #0062cc;
        }

        .btn-primary:disabled {
            background-color: #6c757d;
            border-color: #6c757d;
        }

        /* Password Strength Meter - Disederhanakan */
        .password-strength {
            margin-top: 0.5rem;
        }

        .strength-bar {
            height: 3px;
            background-color: #e9ecef;
            border-radius: 1px;
            overflow: hidden;
            margin-bottom: 0.25rem;
        }

        .strength-fill {
            height: 100%;
            border-radius: 1px;
        }

        .strength-text {
            font-size: 0.75rem;
            color: #6c757d;
        }

        .strength-weak { 
            background: #dc3545;
            width: 33%;
        }
        .strength-medium { 
            background: #ffc107;
            width: 66%;
        }
        .strength-strong { 
            background: #28a745;
            width: 100%;
        }

        /* Password Match Indicator - Disederhanakan */
        .password-match {
            font-size: 0.75rem;
            margin-top: 0.25rem;
        }

        .match-success { color: #28a745; }
        .match-error { color: #dc3545; }

        /* Form Help Text - Disederhanakan */
        .form-text {
            font-size: 0.75rem;
            color: #6c757d;
            margin-top: 0.25rem;
        }

        /* Checkbox Styling - Disederhanakan */
        .form-check {
            margin: 1rem 0;
        }

        .form-check-input:checked {
            background-color: #007bff;
            border-color: #007bff;
        }

        .form-check-label {
            font-size: 0.875rem;
            color: #495057;
        }

        /* Modal Styling - Disederhanakan */
        .modal-content {
            border-radius: 0.3rem;
            border: none;
        }

        .modal-header {
            background-color: #007bff;
            color: white;
            border-radius: 0.3rem 0.3rem 0 0;
        }

        .modal-title {
            font-weight: 500;
        }

        .modal-body {
            padding: 1rem;
            line-height: 1.5;
        }

        .modal-footer {
            border-top: 1px solid #e9ecef;
            padding: 0.75rem 1rem;
        }

        /* Terms Modal Specific Styling - Disederhanakan */
        .terms-content {
            font-size: 0.875rem;
            color: #495057;
        }

        .terms-section {
            margin-bottom: 1rem;
        }

        .terms-heading {
            font-weight: 600;
            color: #343a40;
            margin-bottom: 0.5rem;
            font-size: 1rem;
        .terms-text {
            margin-bottom: 0;
            line-height: 1.5;
            text-align: justify;
        }

        .terms-list {
            margin: 0;
            padding-left: 1.5rem;
        }

        .terms-list li {
            margin-bottom: 0.5rem;
            line-height: 1.5;
        }

        .modal-header .close {
            color: white;
            opacity: 0.8;
            text-shadow: none;
        }

        .modal-header .close:hover {
            color: white;
            opacity: 1;
        }

        /* Login Link */
        .login-link {
            text-align: center;
            margin-top: 1rem;
        }

        .login-link a {
            color: #007bff;
            text-decoration: none;
        }

        .login-link a:hover {
            text-decoration: underline;
        }

        /* Loading State */
        .btn-loading {
            position: relative;
        }

        .btn-loading .spinner-border {
            width: 1rem;
            height: 1rem;
            margin-right: 0.5rem;
        }

        .loading-spinner {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 1s ease-in-out infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        .alert {
            border-radius: 12px;
            border: none;
            padding: 1rem 1.25rem;
            margin-bottom: 1.5rem;
            font-size: 0.9rem;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .alert-success {
            background: linear-gradient(135deg, #d4edda 0%, #c3e6cb 100%);
            color: #155724;
            border-left: 4px solid #28a745;
        }

        .alert-danger {
            background: linear-gradient(135deg, #f8d7da 0%, #f5c6cb 100%);
            color: #721c24;
            border-left: 4px solid #dc3545;
        }

        .alert-info {
            background: linear-gradient(135deg, #d1ecf1 0%, #bee5eb 100%);
            color: #0c5460;
            border-left: 4px solid #17a2b8;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            .register-box {
                width: 90%;
                margin: 1rem auto;
            }
            
            .card-body {
                padding: 1.5rem;
            }
            
            .card-header {
                padding: 1.5rem 1rem;
            }
            
            .brand-logo {
                font-size: 2.5rem;
            }
            
            .card-header h1 {
                font-size: 1.5rem;
            }
        }

        @media (max-width: 480px) {
            .register-box {
                width: 95%;
            }
            
            .card-body {
                padding: 1rem;
            }
        }

        /* Focus states for accessibility */
        .form-control:focus,
        .btn:focus,
        .form-check-input:focus {
            outline: 2px solid #007bff;
            outline-offset: 2px;
        }
        </style>
    </head>
    <body class="hold-transition register-page">
        <div class="register-box">
            <div class="brand-logo text-center">
                <a href="{{ url_for('index') }}" style="color: white; text-decoration: none;">
                    <i class="fas fa-shield-alt"></i>
                </a>
            </div>
            
            <div class="card">
                <div class="card-header">
                    <h1>
                        <i class="fas fa-user-plus mr-2"></i>
                        Permintaan Registrasi
                    </h1>
                    <p>Bergabunglah dengan sistem klasifikasi konten</p>
                </div>
                
                <div class="card-body">
                    <div class="info-box">
                        <div class="icon">
                            <i class="fas fa-info-circle"></i>
                        </div>
                        <div class="info-box-content">
                            <strong>Informasi Penting:</strong><br>
                            Permintaan registrasi Anda akan dikirim ke administrator untuk persetujuan. 
                            Anda akan menerima email konfirmasi setelah admin menyetujui akun Anda.
                        </div>
                    </div>
                    
                    {% with messages = get_flashed_messages(with_categories=true) %}
                        {% if messages %}
                            {% for category, message in messages %}
                                <div class="alert alert-{{ 'danger' if category == 'error' else category }} alert-dismissible fade show" role="alert">
                                    <i class="fas fa-{{ 'exclamation-triangle' if category == 'error' else 'info-circle' if category == 'info' else 'check-circle' if category == 'success' else 'exclamation-triangle' }} mr-2"></i>
                                    {{ message }}
                                    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                                        <span aria-hidden="true">&times;</span>
                                    </button>
                                </div>
                            {% endfor %}
                        {% endif %}
                    {% endwith %}
                    
                    <form method="POST" id="registerForm" novalidate>
                        <input type="hidden" name="csrf_token" value="{{ csrf_token() }}"/>
                        <div class="form-group">
                            <label for="username" class="form-label">
                                Username
                            </label>
                            <div class="input-group">
                                <div class="input-group-prepend">
                                    <span class="input-group-text">
                                        <i class="fas fa-user"></i>
                                    </span>
                                </div>
                                <input type="text" 
                                       class="form-control" 
                                       name="username" 
                                       id="username" 
                                       placeholder="Masukkan username unik Anda"
                                       required 
                                       maxlength="50" 
                                       pattern="[a-zA-Z0-9_]+" 
                                       title="Username hanya boleh mengandung huruf, angka, dan underscore"
                                       autocomplete="username">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="email" class="form-label">
                                Email Address
                            </label>
                            <div class="input-group">
                                <div class="input-group-prepend">
                                    <span class="input-group-text">
                                        <i class="fas fa-envelope"></i>
                                    </span>
                                </div>
                                <input type="email" 
                                       class="form-control" 
                                       name="email" 
                                       id="email" 
                                       placeholder="nama@email.com"
                                       required 
                                       maxlength="100"
                                       autocomplete="email">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="full_name" class="form-label">
                                Nama Lengkap <span class="text-muted">(Opsional)</span>
                            </label>
                            <div class="input-group">
                                <div class="input-group-prepend">
                                    <span class="input-group-text">
                                        <i class="fas fa-id-card"></i>
                                    </span>
                                </div>
                                <input type="text" 
                                       class="form-control" 
                                       name="full_name" 
                                       id="full_name" 
                                       placeholder="Nama lengkap Anda"
                                       maxlength="100"
                                       autocomplete="name">
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <label for="password" class="form-label">
                                Password
                            </label>
                            <div class="input-group">
                                <div class="input-group-prepend">
                                    <span class="input-group-text">
                                        <i class="fas fa-lock"></i>
                                    </span>
                                </div>
                                <input type="password" 
                                       class="form-control" 
                                       name="password" 
                                       id="password" 
                                       placeholder="Buat password yang kuat"
                                       required 
                                       minlength="6"
                                       autocomplete="new-password">
                                <div class="input-group-append">
                                    <button class="btn btn-outline-secondary" 
                                            type="button" 
                                            id="togglePassword"
                                            title="Tampilkan/Sembunyikan Password">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="password-strength" id="passwordStrength"></div>
                        </div>
                        
                        <div class="form-group">
                            <label for="confirm_password" class="form-label">
                                Konfirmasi Password
                            </label>
                            <div class="input-group">
                                <div class="input-group-prepend">
                                    <span class="input-group-text">
                                        <i class="fas fa-lock"></i>
                                    </span>
                                </div>
                                <input type="password" 
                                       class="form-control" 
                                       name="confirm_password" 
                                       id="confirm_password" 
                                       placeholder="Ulangi password Anda"
                                       required 
                                       minlength="6"
                                       autocomplete="new-password">
                                <div class="input-group-append">
                                    <button class="btn btn-outline-secondary" 
                                            type="button" 
                                            id="toggleConfirmPassword"
                                            title="Tampilkan/Sembunyikan Password">
                                        <i class="fas fa-eye"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="password-match" id="passwordMatch"></div>
                        </div>
                        
                        <div class="form-group">
                            <div class="custom-control custom-checkbox">
                                <input type="checkbox" 
                                       class="custom-control-input" 
                                       id="agreeTerms" 
                                       required>
                                <label class="custom-control-label" for="agreeTerms">
                                    Saya setuju dengan 
                                    <a href="#" class="text-primary" data-toggle="modal" data-target="#termsModal">
                                        syarat dan ketentuan
                                    </a> 
                                    yang berlaku
                                </label>
                            </div>
                        </div>
                        
                        <div class="form-group">
                            <button type="submit" class="btn btn-primary btn-block" id="submitBtn">
                                <i class="fas fa-paper-plane mr-2"></i>
                                Kirim Permintaan Registrasi
                            </button>
                        </div>
                    </form>
                    
                    <div class="login-link">
                        <p class="mb-0">
                            <i class="fas fa-sign-in-alt mr-1"></i>
                            Sudah punya akun? 
                            <a href="{{ url_for('login') }}">Login di sini</a>
                        </p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Terms Modal -->
        <div class="modal fade" id="termsModal" tabindex="-1" role="dialog" aria-labelledby="termsModalLabel" aria-hidden="true">
            <div class="modal-dialog modal-lg" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="termsModalLabel">
                            <i class="fas fa-file-contract mr-2"></i>
                            Syarat dan Ketentuan
                        </h5>
                        <button type="button" class="close text-white" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <div class="terms-content">
                            <div class="terms-section mb-4">
                                <h6 class="terms-heading">
                                    <i class="fas fa-cog text-primary mr-2"></i>
                                    1. Penggunaan Sistem
                                </h6>
                                <p class="terms-text">
                                    Sistem Waskita digunakan untuk klasifikasi konten radikal pada media sosial menggunakan teknologi Machine Learning. Pengguna bertanggung jawab penuh atas data yang diupload dan penggunaan fitur yang tersedia.
                                </p>
                            </div>
                            
                            <div class="terms-section mb-4">
                                <h6 class="terms-heading">
                                    <i class="fas fa-shield-alt text-success mr-2"></i>
                                    2. Privasi dan Keamanan Data
                                </h6>
                                <p class="terms-text">
                                    Kami berkomitmen menjaga kerahasiaan dan keamanan data pengguna. Data yang diupload akan diproses sesuai dengan kebijakan privasi dan tidak akan dibagikan kepada pihak ketiga tanpa persetujuan.
                                </p>
                            </div>
                            
                            <div class="terms-section mb-4">
                                <h6 class="terms-heading">
                                    <i class="fas fa-user-check text-info mr-2"></i>
                                    3. Kewajiban Pengguna
                                </h6>
                                <ul class="terms-list">
                                    <li>Menggunakan sistem sesuai dengan tujuan yang dimaksud</li>
                                    <li>Tidak menyalahgunakan fitur yang tersedia</li>
                                    <li>Menjaga kerahasiaan akun dan password</li>
                                    <li>Melaporkan bug atau masalah keamanan yang ditemukan</li>
                                    <li>Tidak menggunakan sistem untuk tujuan ilegal</li>
                                </ul>
                            </div>
                            
                            <div class="terms-section mb-4">
                                <h6 class="terms-heading">
                                    <i class="fas fa-exclamation-triangle text-warning mr-2"></i>
                                    4. Pembatasan dan Sanksi
                                </h6>
                                <p class="terms-text">
                                    Administrator berhak membatasi, menangguhkan, atau menonaktifkan akun yang melanggar ketentuan. Pelanggaran serius dapat berakibat pada pemblokiran permanen.
                                </p>
                            </div>
                            
                            <div class="terms-section">
                                <h6 class="terms-heading">
                                    <i class="fas fa-sync-alt text-secondary mr-2"></i>
                                    5. Perubahan Ketentuan
                                </h6>
                                <p class="terms-text">
                                    Syarat dan ketentuan ini dapat berubah sewaktu-waktu. Pengguna akan diberitahu melalui email atau notifikasi sistem tentang perubahan yang signifikan.
                                </p>
                            </div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">
                            <i class="fas fa-times mr-1"></i>
                            Tutup
                        </button>
                        <button type="button" class="btn btn-primary" id="acceptTerms">
                            <i class="fas fa-check mr-1"></i>
                            Saya Setuju
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- jQuery -->
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        <!-- Bootstrap 4 -->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/js/bootstrap.bundle.min.js"></script>
        <!-- AdminLTE App -->
        <script src="https://cdn.jsdelivr.net/npm/admin-lte@3.2/dist/js/adminlte.min.js"></script>
        <!-- SweetAlert2 -->
        <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
        
        <script>
        $(document).ready(function() {
            // Initialize tooltips
            $('[title]').tooltip();
            
            // Password visibility toggle
            function togglePasswordVisibility(inputId, buttonId) {
                $(buttonId).click(function() {
                    const passwordField = $(inputId);
                    const icon = $(this).find('i');
                    
                    if (passwordField.attr('type') === 'password') {
                        passwordField.attr('type', 'text');
                        icon.removeClass('fa-eye').addClass('fa-eye-slash');
                        $(this).attr('title', 'Sembunyikan Password');
                    } else {
                        passwordField.attr('type', 'password');
                        icon.removeClass('fa-eye-slash').addClass('fa-eye');
                        $(this).attr('title', 'Tampilkan Password');
                    }
                });
            }
            
            togglePasswordVisibility('#password', '#togglePassword');
            togglePasswordVisibility('#confirm_password', '#toggleConfirmPassword');
            
            // Enhanced password strength checker
            $('#password').on('input', function() {
                const password = $(this).val();
                const strengthBar = $('#passwordStrength');
                
                if (password.length === 0) {
                    strengthBar.removeClass().addClass('password-strength');
                    return;
                }
                
                let strength = 0;
                const checks = {
                    length: password.length >= 8,
                    lowercase: /[a-z]/.test(password),
                    uppercase: /[A-Z]/.test(password),
                    numbers: /\d/.test(password),
                    symbols: /[^a-zA-Z0-9]/.test(password)
                };
                
                // Calculate strength
                if (password.length >= 6) strength++;
                if (checks.lowercase) strength++;
                if (checks.uppercase) strength++;
                if (checks.numbers) strength++;
                if (checks.symbols) strength++;
                
                strengthBar.removeClass();
                if (strength <= 2) {
                    strengthBar.addClass('password-strength strength-weak');
                } else if (strength <= 3) {
                    strengthBar.addClass('password-strength strength-medium');
                } else {
                    strengthBar.addClass('password-strength strength-strong');
                }
            });
            
            // Real-time password match checker
            function checkPasswordMatch() {
                const password = $('#password').val();
                const confirmPassword = $('#confirm_password').val();
                const matchDiv = $('#passwordMatch');
                
                if (confirmPassword.length === 0) {
                    matchDiv.html('');
                    return;
                }
                
                if (password === confirmPassword) {
                    matchDiv.html('<small class="text-success"><i class="fas fa-check mr-1"></i>Password cocok</small>');
                } else {
                    matchDiv.html('<small class="text-danger"><i class="fas fa-times mr-1"></i>Password tidak cocok</small>');
                }
            }
            
            $('#confirm_password, #password').on('input', checkPasswordMatch);
            
            // Enhanced form validation
            $('#registerForm').on('submit', function(e) {
                e.preventDefault();
                
                const formData = {
                    username: $('#username').val().trim(),
                    email: $('#email').val().trim(),
                    password: $('#password').val(),
                    confirmPassword: $('#confirm_password').val(),
                    agreeTerms: $('#agreeTerms').is(':checked')
                };
                
                // Validation checks
                const validations = [
                    {
                        condition: !formData.username,
                        message: 'Username harus diisi'
                    },
                    {
                        condition: !/^[a-zA-Z0-9_]+$/.test(formData.username),
                        message: 'Username hanya boleh mengandung huruf, angka, dan underscore'
                    },
                    {
                        condition: !formData.email,
                        message: 'Email harus diisi'
                    },
                    {
                        condition: !/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(formData.email),
                        message: 'Format email tidak valid'
                    },
                    {
                        condition: formData.password.length < 6,
                        message: 'Password minimal 6 karakter'
                    },
                    {
                        condition: formData.password !== formData.confirmPassword,
                        message: 'Password dan konfirmasi password tidak cocok'
                    },
                    {
                        condition: !formData.agreeTerms,
                        message: 'Anda harus menyetujui syarat dan ketentuan'
                    }
                ];
                
                // Check for validation errors
                for (let validation of validations) {
                    if (validation.condition) {
                        Swal.fire({
                            icon: 'error',
                            title: 'Validasi Gagal',
                            text: validation.message,
                            confirmButtonColor: '#11998e',
                            confirmButtonText: 'OK'
                        });
                        return false;
                    }
                }
                
                // Show loading state
                const submitBtn = $('#submitBtn');
                const originalText = submitBtn.html();
                submitBtn.html('<span class="loading-spinner"></span> Mengirim permintaan...');
                submitBtn.prop('disabled', true);
                
                // Submit form
                setTimeout(() => {
                    this.submit();
                }, 500);
            });
            
            // Username validation with real-time feedback
            $('#username').on('input', function() {
                const username = $(this).val();
                const regex = /^[a-zA-Z0-9_]+$/;
                
                if (username && !regex.test(username)) {
                    $(this).addClass('is-invalid');
                } else {
                    $(this).removeClass('is-invalid');
                }
            });
            
            // Email validation with real-time feedback
            $('#email').on('blur', function() {
                const email = $(this).val();
                const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                
                if (email && !emailRegex.test(email)) {
                    $(this).addClass('is-invalid');
                } else {
                    $(this).removeClass('is-invalid');
                }
            });
            
            // Terms modal accept button
            $('#acceptTerms').click(function() {
                $('#agreeTerms').prop('checked', true);
                $('#termsModal').modal('hide');
                
                Swal.fire({
                    icon: 'success',
                    title: 'Terima Kasih',
                    text: 'Anda telah menyetujui syarat dan ketentuan',
                    timer: 2000,
                    showConfirmButton: false,
                    toast: true,
                    position: 'top-end'
                });
            });
            
            // Auto-focus first input
            $('#username').focus();
            
            // Prevent form submission on Enter in input fields (except submit button)
            $('#registerForm input').not('#submitBtn').keydown(function(e) {
                if (e.keyCode === 13) {
                    e.preventDefault();
                    const inputs = $('#registerForm input:visible');
                    const currentIndex = inputs.index(this);
                    if (currentIndex < inputs.length - 1) {
                        inputs.eq(currentIndex + 1).focus();
                    }
                }
            });
        });
        </script>
    </body>
</html>